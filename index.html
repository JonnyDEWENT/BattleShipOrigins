<!DOCTYPE html>
<html>

<head>
    <link href='https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons' rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
    <script src="./app.js"></script>
    <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyDvzMCsyGXydAQ64mJ6Wxqj5MMUQgMt5q0",
            authDomain: "battleship-dd875.firebaseapp.com",
            databaseURL: "https://battleship-dd875.firebaseio.com",
            projectId: "battleship-dd875",
            storageBucket: "battleship-dd875.appspot.com",
            messagingSenderId: "835160490310"
        };
        firebase.initializeApp(config);
        var database = firebase.database();
        firebase.database.enableLogging(function (message) {
            console.log("\t[FIREBASE]", message);
        });
        var rootRef = firebase.database().ref();
        var node_matches = database.ref("games");
        var node_profiles = database.ref("users");
    </script>

    <style>
        td {
            padding: 20px;
            margin: 3px;
            background-color: yellow;
        }

        .hit {
            background-color: red;
        }

        .miss {
            background-color: blue;
        }

        .normal {
            background-color: gray;
        }

        .ship {
            background-color: green;
        }

        .image {
            width: 20%;
            height: 20%;
        }
    </style>
</head>

<body>

    
    <table>
        <tr>
            <td class="hit"><img class="image" src="./images/ocean01.jpg" alt="fail" /></td>
            <td class="miss"></td>
            <td class="ship"></td>
        </tr>
        <tr>
            <td class="normal"></td>
            <td class="hit"></td>
            <td class="miss"></td>
        </tr>
        <tr>
            <td class="normal"></td>
            <td class="miss"></td>
            <td class="normal"></td>
        </tr>
    </table>
    <div id="app">
            <div>{{testString}}</div>

        <v-app>
            <button-counter></button-counter>
            <!-- <world-clock src="./images/ocean01.jpg"></world-clock> -->
            <v-content>
                <button-counter></button-counter>
                <!-- Sign-in Screen  -->
                <v-container style="background-color: black" v-show="screen == 0">
                    <v-layout row align-center justify-center style="background-color: rgb(76, 113, 216)">
                        <v-flex lg6>
                            <v-card class="pa-3">

                                <v-layout align-center justify-center>
                                    <h1>Battleship Origins</h1>
                                </v-layout>
                                <v-layout column>
                                    <v-flex lg9 md9 sm6 class="pa-2">
                                        <v-img :src="`./images/pirateship.jpg`" aspect-ratio="2" transition="slide-x-transition">
                                    </v-flex>
                                </v-layout>

                                <v-layout row class="pa-4" justify-center>

                                    <v-flex>
                                        <v-text-field id="email" label="Email" value="bassorm@gmail.com"></v-text-field>
                                    </v-flex>
                                </v-layout>
                                <v-layout row class="pa-4" justify-center>
                                    <v-flex>
                                        <v-text-field id="password" label="Password" value="battleMATEY01"></v-text-field>
                                    </v-flex>
                                </v-layout>
                                <v-layout class="pa-4" justify-center>
                                    <!-- <template> -->
                                    <div>
                                        <v-btn color="info" id="btnLogIn">Log In</v-btn>
                                        <v-btn color="info" id="btnSignUp">Sign Up</v-btn>
                                    </div>
                                    <!-- </template> -->
                                </v-layout>
                            </v-card>
                        </v-flex>
                    </v-layout>
                </v-container>

                <!-- End of sign-in screen -->

                <!-- Start of Lobby Screen -->

                <v-container style="background-color: black" v-show="screen === 1">
                    <v-layout row align-center justify-center style="background-color: rgb(155, 35, 75)">
                        <v-flex lg9>
                            <v-card class="pa-3">

                                <v-layout align-center justify-center>
                                    <h1>Welcome {{username}}!</h1>
                                </v-layout>
                                <v-layout column>
                                    <v-flex lg9 md9 sm6 class="pa-2">
                                        <v-img :src="`${userPicNum}`" aspect-ratio="2" transition="slide-x-transition"
                                            id="profilepic">
                                    </v-flex>
                                </v-layout>

                                <v-layout row class="pa-4" justify-center>

                                    <v-flex>


                                        <!-- testing v-data-table -->

                                        <h1>Open games</h1>
                                        <v-data-table :headers="headers" :items="availableGames" class="elevation-1">
                                            <template slot="headerCell" slot-scope="props">
                                                <v-tooltip bottom>
                                                    <span slot="activator">
                                                        {{ props.header.text }}
                                                    </span>
                                                    <span>
                                                        {{ props.header.text }}
                                                    </span>
                                                </v-tooltip>
                                            </template>
                                            <template slot="items" slot-scope="props">
                                                <td>{{ props.item.playerOne }}</td>
                                                <td>{{ props.item.playerTwo }}</td>
                                                <td style="align-content: right">Waiting for another player...</td>
                                                <td>
                                                    <v-btn v-model="availableGames.gameNumber" class="text-transform-none"
                                                        :input-value="`${props.item.gameNumber}`" onclick="addPlayerTwo(this)"
                                                        style="text-transform: none !important">
                                                        {{props.item.gameNumber}} </v-btn>
                                                </td>
                                            </template>
                                        </v-data-table>



                                        <h1>Ongoing games</h1>
                                        <v-data-table :headers="headers" :items="gamesInProgress" class="elevation-1">
                                            <template slot="headerCell" slot-scope="props">
                                                <v-tooltip bottom>
                                                    <span slot="activator">
                                                        {{ props.header.text }}
                                                    </span>
                                                    <span>
                                                        {{ props.header.text }}
                                                    </span>
                                                </v-tooltip>
                                            </template>
                                            <template slot="items" slot-scope="props">
                                                <td>{{ props.item.playerOne }}</td>
                                                <td>{{ props.item.playerTwo }}</td>
                                                <td style="align-content: right">In progress</td>

                                            </template>
                                        </v-data-table>



                                        <h1>Past games</h1>
                                        <v-data-table :headers="headers" :items="pastGames" class="elevation-1">
                                            <template slot="headerCell" slot-scope="props">
                                                <v-tooltip bottom>
                                                    <span slot="activator">
                                                        {{ props.header.text }}
                                                    </span>
                                                    <span>
                                                        {{ props.header.text }}
                                                    </span>
                                                </v-tooltip>
                                            </template>
                                            <template slot="items" slot-scope="props">
                                                <td>{{ props.item.playerOne }}</td>
                                                <td>{{ props.item.playerTwo }}</td>
                                                <td style="align-content: right">{{ props.item.status }}</td>

                                            </template>
                                        </v-data-table>

                                    </v-flex>
                                </v-layout>
                                <v-layout row class="pa-4" justify-center>
                                    <v-flex>
                                        <!-- Empty -->
                                    </v-flex>
                                </v-layout>
                            </v-card>
                            <v-card>
                                <v-layout class="pa-4" justify-center>
                                    <template>
                                        <!-- <v-data-table
                    :headers="headers"
                    :items="games"
                    class="elevation-1"
                  >
                  <template slot="items" slot-scope="props">
                      <td class="text-xs-right">{{ props.item.playerOne }}</td>
                      <td class="text-xs-right">{{ props.item.playerTwo }}</td>
                      <td class="text-xs-right">{{ props.item.playerThree }}</td>
                    </template>
                  </v-data-table> -->
                                    </template>
                                    <template>
                                        <div>
                                            <v-btn color="success" id="btnNewGame">New Game</v-btn>
                                            <v-btn color="red" id="btnLogOut">Log Out</v-btn>
                                        </div>
                                    </template>

                                </v-layout>
                            </v-card>
                        </v-flex>
                    </v-layout>

                </v-container>



                <!-- End of Lobby Screen -->



                <!-- RYAN PUT BATTLE SHIP GAME UI STUFF HERE -->
                <v-container style="background-color: black" v-show="screen === 2">

                    <v-layout row align-center justify-center style="background-color: rgb(155, 35, 75)">
                        <v-flex lg9>
                            <v-card class="pa-3">
                                <v-layout align-center justify-center>
                                    <h1>{{username}} vs ___</h1>
                                </v-layout>
                                <v-layout column>
                                    <v-flex lg9 md9 sm6 class="pa-2">
                                    </v-flex>
                                </v-layout>







                </v-container>

                <!-- END OF BATTLE SHIP GAME UI -->


            </v-content>
        </v-app>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.js"></script>
    <script>
        Vue.component('button-counter', {
            data: function () {
                return {
                    count: 0
                }
            },
            template: '<button v-on:click="count++">You clicked me {{ count }} times.</button>'
        });


        Vue.component('world-clock', {
            template: '<td><img v-bind:src="image" name="name" grid="grid" onclick="updateTable"/></td>',
            props: {
                clickable: {
                    required: true,
                    type: Boolean
                },
                name: {
                    type: String,
                    required: true
                },
                gridBelongsTo: {
                    type: String,
                    require: true
                },
                image: {
                    type: String,
                    required: true
                },
                format: {
                    type: String,
                    default: 'HH: mm'
                }
            }
        });


        // Vue.component('world-clock', {
        //     template: '< div > {{ timeStr }}</div >',
        //     // use an object for
        //     // extended definition of properties
        //     // RECOMMENDED
        //     props: {
        //         format: {
        //             type: String,
        //             default: 'HH: mm'
        //         },
        //         timeZone: {
        //             type: String,
        //             required: true,
        //             default: 'UTC'
        //         }
        //     }
        // });

        var battleship = new Vue({
            el: '#app',
            data: {
                testString: "hello, this is Bob!",
                screen: 0,
                playerProfile: null,
                username: "",
                userPicNum: "./images/anonUser.png",
                availableGames: [], // this should be in playerProfile info
                gamesInProgress: [],
                pastGames: [],
                profilepics: ["./images/pirate1.jpg", "./images/anonUser.png", "./images/daveyJones.png", "./images/femalePirate.png"],
                headers: [
                    {
                        text: 'Player 1',
                        align: 'left',
                        sortable: true,
                        value: 'playerOne'
                    },
                    { text: 'Player 2', value: 'playerTwo' },
                    { text: 'Status', value: 'status' },
                    { text: 'Join Game #', value: 'action' }
                ]

            }
        });


        authenticate(battleship);
    </script>
</body>

</html>